(self.mfeModules=self.mfeModules||[]).push(["pcmall-rcmd-daily-discover-module",["React","Redux","PlatformApi","ReactRedux","WithInjectReducer","FeatureToggles","ReactRouter","Platform","Account","ReactHelmet","ReactDom","NebulaCore"],function(t,e,n,r,o,a,i,c,s,u,l,d){return(self["mfeStartuppcmall-rcmd"]||function(){})(972),["pcmall-rcmd",(self.wpJsonpPcmallRcmd=self.wpJsonpPcmallRcmd||[]).push([[972],{3553:function(t,e,n){"use strict";function r(t,e,n){for(var r=t.slice(),o=n||0===n?n:t.length,a=0;a<e.length;a++)r[o+a]=e[a];return r}n.d(e,{Z:function(){return r}})},3581:function(t,e,n){"use strict";n(3804),e.ZP=function(t,e){var n=null,r=function(){n&&clearTimeout(n)},o=function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];r(),n=setTimeout((function(){t.apply(void 0,a),n=null}),e)};return o.cancel=r,o}},9712:function(t,e,n){"use strict";function r(t,e,n){if(Array.isArray(e)&&e.length){var o=e[0];return t&&Object.prototype.hasOwnProperty.call(t,o)?r(t[o],e.slice(1),n):n}return t}n.d(e,{Z:function(){return r}})},4832:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});var r=function(){var t=this;this.subscribers=[],this.publish=function(e){return new Promise((function(n){"function"==typeof self.requestIdleCallback?self.requestIdleCallback((function(){t._notifySubscriber(e).then(n)})):t._notifySubscriber(e).then(n)}))},this.subscribe=function(e,n){return t.subscribers.push({selector:e,subscriber:n}),t._unsubscribe.bind(t,e,n)},this._notifySubscriber=function(e){var n=JSON.stringify(e)||"";return Promise.all(t.subscribers.map((function(t){if(t.selector(e))return t.subscriber(JSON.parse(n))})))},this._unsubscribe=function(e,n){var r=t.subscribers.findIndex((function(t){return t.selector===e&&t.subscriber===n}));t.subscribers.splice(r,1)}}},9063:function(t,e,n){var r=n(6704).FetchUtils;t.exports=r},5863:function(t,e){var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var a=typeof n;if("string"===a||"number"===a)t.push(n);else if(Array.isArray(n)){if(n.length){var i=o.apply(null,n);i&&t.push(i)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){t.push(n.toString());continue}for(var c in n)r.call(n,c)&&n[c]&&t.push(c)}}}return t.join(" ")}t.exports?(o.default=o,t.exports=o):void 0===(n=function(){return o}.apply(e,[]))||(t.exports=n)}()},5410:function(t,e,n){"use strict";var r=n(4133);function o(){}t.exports=function(){function t(t,e,n,o,a,i){if(i!==r){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=o,n.PropTypes=n,n}},2260:function(t,e,n){t.exports=n(5410)()},4133:function(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},8056:function(t,e,n){"use strict";n.d(e,{f:function(){return o}});var r=n(6775);function o(t,e,n){return void 0===n&&(n=[]),t.some((function(t){var a=t.path?(0,r.matchPath)(e,t):n.length?n[n.length-1].match:r.Router.computeRootMatch(e);return a&&(n.push({route:t,match:a}),t.routes&&o(t.routes,e,n)),a})),n}n(3804)},1902:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});function r(t,e){if(!t)throw new Error("Invariant failed")}},7313:function(t,e,n){"use strict";var r;n.d(e,{Z:function(){return l}});var o=new Uint8Array(16);function a(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)}for(var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,c=function(t){return"string"==typeof t&&i.test(t)},s=[],u=0;u<256;++u)s.push((u+256).toString(16).substr(1));var l=function(t,e,n){var r=(t=t||{}).random||(t.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=r[o];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]).toLowerCase();if(!c(n))throw TypeError("Stringified UUID is invalid");return n}(r)}},9755:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(3804),o=n(8674),a=n(1522),i=function(t){var e=t.customHeader;return r.createElement("img",{src:(0,o.Jn)(e.image),style:{width:e.display_width?(0,a.Z)(e.display_width):"auto",height:e.display_height?(0,a.Z)(e.display_height):"auto"}})},c=function(t){var e=t.headerText,n=t.customHeader;return n?n.image?r.createElement(i,{customHeader:{image:n.image,display_width:n.display_width,display_height:n.display_height}}):r.createElement("span",{style:{color:n.color||void 0}},e):r.createElement(r.Fragment,null,e)||null}},7864:function(t,e,n){"use strict";n.d(e,{fp:function(){return x},aN:function(){return C},zP:function(){return H},WO:function(){return k},l_:function(){return N},Vx:function(){return M},KM:function(){return D},NU:function(){return U}});var r,o=n(7899),a=n(8947),i=n(9063),c=n(7008),s=(0,c.n)("FETCH_DAILY_DISCOVER_MAIN"),u=(0,c.n)("DAILY_DISCOVER_MAIN_REMOVE_ITEM");!function(t){t[t.FREE_GIFTS=1]="FREE_GIFTS",t[t.EXCLUSIVE_DEALS=2]="EXCLUSIVE_DEALS"}(r||(r={}));var l,d,f,p,_={1:"free-gifts",2:"exclusive-deals"};!function(t){t.Item="item",t.Ads="ads",t.Collection="collection",t.TopProduct="top_product",t.Keyword="keyword",t.L2Cat="l2cat",t.Shop="shop",t.Knode="knode",t.Food="food_item",t.Livestream="stream",t.Video="video"}(l||(l={})),function(t){t[t.DISLIKE=1]="DISLIKE",t[t.REPORT_INAPPROPRIATE=2]="REPORT_INAPPROPRIATE"}(d||(d={})),(p=f||(f={})).Item="item_card",p.Ads="ads_item_card",p.ShopeePay="shopee_pay_voucher_card",p.Food="food_item_card",p.TopProduct="top_product_card",p.Knode="featured_collection_card",p.Livestream="livestream_card",p.Video="video_card";var h={SG:{all_tab_config:{display_text:"All",tab_image:"8605794b554a56fbd45124ab53f87ca7",text_color:"#ee4d2d"}},ID:{all_tab_config:{display_text:"Semua",tab_image:"8605794b554a56fbd45124ab53f87ca7",text_color:"#ee4d2d"}},MY:{all_tab_config:{display_text:"All",tab_image:"439e072505267a0ee1697ffdd38f886b",text_color:"#ee4d2d"}},PH:{all_tab_config:{display_text:"All",tab_image:"f0c0b4f654ffde3b97edb9468b7782d5",text_color:"#ee4d2d"}},TH:{all_tab_config:{display_text:"สินค้าแนะนำ",tab_image:"7cb98aae24d04ff82ef2ee8879dbca33",text_color:"#ee4d2d"}},TW:{all_tab_config:{display_text:"全部",tab_image:"8605794b554a56fbd45124ab53f87ca7",text_color:"#ee4d2d"}},VN:{all_tab_config:{display_text:"Tất cả",tab_image:"8605794b554a56fbd45124ab53f87ca7",text_color:"#ee4d2d"}},BR:{all_tab_config:{display_text:"Tudo",tab_image:"0668017f080a7aa5c62a32cff930bd5b",text_color:"#000000"}},MX:{all_tab_config:{display_text:"Todo",tab_image:"c914bd47df5c1905e77af69092f05501",text_color:"#ee4d2d"}},CO:{all_tab_config:{display_text:"Todo",tab_image:"c914bd47df5c1905e77af69092f05501",text_color:"#ee4d2d"}},CL:{all_tab_config:{display_text:"Todo",tab_image:"c914bd47df5c1905e77af69092f05501",text_color:"#ee4d2d"}},AR:{all_tab_config:{display_text:"Todos",tab_image:"3625beb950f8e8e7d4e253c933c2f169",text_color:"#ee4d2d"}},PL:{all_tab_config:{display_text:"Wszystkie",tab_image:"8605794b554a56fbd45124ab53f87ca7",text_color:"#ee4d2d"}},ES:{all_tab_config:{display_text:"Todo",tab_image:"c914bd47df5c1905e77af69092f05501",text_color:"#ee4d2d"}},FR:{all_tab_config:{display_text:"TOUT",tab_image:"c914bd47df5c1905e77af69092f05501",text_color:"#ee4d2d"}},IN:{all_tab_config:{display_text:"All",tab_image:"8605794b554a56fbd45124ab53f87ca7",text_color:"#ee4d2d"}},default:{all_tab_config:{display_text:"All",tab_image:"8605794b554a56fbd45124ab53f87ca7",text_color:"#ee4d2d"}}},m=n(4423);function b(){return b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b.apply(this,arguments)}function v(t){return t?{name:t.display_text,color:t.text_color,imageForPC:t.pc_image,imageForApp:t.tab_image,label:t.product_label,recommendType:t.algo_type||0}:{}}function g(t){var e,n=t.headers,r=null!=(e=null==t?void 0:t.data)?e:{},o=r.update_time,a=r.sections,i=void 0===a?[]:a,c=r.version,s=r.tab_meta_data,u=r.user_meta_data,d=i.find((function(t){return"dd_main_sec"===t.key}));if(!d)return O(o,c);var f,p,h,m=d.index,g=d.data,y=d.total,T=(f=s)?{tabConfig:{all:v(f.all_tab_config),campaign:null!=(p=null===(h=f.campaign_tabs)||void 0===h?void 0:h.map(v))?p:[],shouldHideTabs:Boolean(f.should_hide_tabs)}}:{};return b({},function(t){var e=t.index,n=t.data,r=t.total,o=t.update_time,a=t.version;if(!e||!n)return O(o,a);var i=[];return e.forEach((function(t){var e=function(t,e){var n,r,o,a,i,c=e.data_type,s=(t&&t[c]||[]).find((function(t){return t.key===e.key}));switch(c){case l.Collection:return s?(r=(n=s).key,o=n.collection_id,a=n.collectionid,{key:r,collectionId:o||a,name:n.name,image:n.page_template_image,images:void 0===(i=n.images)?[]:i,sold:n.sold,recommendation_info:n.info,recommendation_algorithm:n.from,data_type:n.data_type}):void 0;case l.Knode:return s?function(t){var e=t.data_type,n=t.name,r=t.label,o=t.key,a=t.knodeid,i=t.images,c=t.info,s=t.count,u=t.item_count,l=void 0===u?0:u;return{data_type:e,name:n,label:r,key:o,knodeid:a,image:i?i[0]:null,images:i,count:s,item_count:l,recommendation_algorithm:"",recommendation_info:c}}(s):void 0;case l.TopProduct:return s?function(t){var e=t.key,n=t.intentionid,r=t.label,o=t.name,a=t.images,i=t.count,c=t.info,s=t.from,u=t.data_type;return{key:e,count:i,topProductId:n||r||"",name:o,image:a?a[0]:null,sold:i,recommendation_info:c,recommendation_algorithm:s,data_type:u}}(s):void 0;case l.Item:return s?function(t){var e;if(null===(e=t.product_banners)||void 0===e||!e.length)return t;var n=t.product_banners[0];if(0===n.priority){var r=t.wp_eligibility?_[t.wp_eligibility.wp_type]:null,o=r?"rn/@shopee-rn/welcome-package/WELCOME_PACKAGE_PAGE?type="+r:"rn/@shopee-rn/welcome-package/WELCOME_PACKAGE_PAGE";return b({},E(t),{item_bottom_label:b({},n,{url:o,targetType:"NEW_USER_LABEL"})})}if(1===n.priority&&t.top_product_label){var a=t.top_product_label,i=a.knodeid,c=a.top_product_type,s=void 0===c?1:c,u=a.section,l=void 0===u?"dd_tsp_item_sec":u;return i?b({},t,{item_bottom_label:b({},n,{url:"rn/@shopee-rn/recommendation/DAILY_DISCOVER_TOP_PRODUCTS?intentionId="+encodeURIComponent(i)+"&sortType="+s+"&section="+l,targetType:"TOP_PRODUCT_BANNER"})}):t}}(s):void 0;default:return s}}(n,t);e&&i.push(e)})),{update_time:o,sections:{dd_main_sec:{total:r,data:i}}}}({index:m,data:g,total:y,update_time:o,version:c}),T,{requestId:n.get("x-request-id"),user_meta_data:u})}function y(t){var e=t.data.tab_meta_data;return{all:T(e&&e.all_tab_config),campaign:(e&&e.campaign_tabs||[]).map((function(t){return t?T(t):{}})),shouldHideTabs:Boolean(null==e?void 0:e.should_hide_tabs)}}var E=function(t){return b({},t,{label_ids:t.label_ids||[]})};function O(t,e){return{update_time:t||0,version:e||void 0,sections:{dd_main_sec:{total:0,data:[]}}}}function T(t){var e=(0,m.Kd)();if(!t){var n=h[""+e].all_tab_config||h.default.all_tab_config;return{name:n.display_text,color:n.text_color,imageForApp:n.tab_image,imageForPC:n.tab_image}}return{name:t.display_text,color:t.text_color,imageForPC:t.pc_image,imageForApp:t.tab_image,label:t.product_label,recommendType:t.algo_type||0}}function C(t){var e=t.limit,n=t.offset,r=t.latitude,c=t.longitude,u=t.city,l=t.district,d=t.itemCardStyle,f=t.onFinish,p=t.shouldSkipCall,_=t.shouldReset,h=t.isFriendVisible,m=t.layout_track_id,b=t.treatment_group,v=t.treatment_toggle,E=t.view_session_id,O=(0,a.Wc)({bundle:"daily_discover_main",limit:e,offset:n,latitude:r,longitude:c,city:u,district:l,item_card:d,friend_visible:h,layout_track_id:m,treatment_group:b,treatment_toggle:v,view_session_id:E});return(0,o.Z)({apiCall:function(){return function(t){return(0,i.fetchInfo)("/api/v4/recommend/recommend"+t)}(O)},actions:[function(){return{type:s.REQUESTED}},function(t,r){return{type:s.SUCCESS,payload:{offset:n,limit:e,data:g(r),tabConfig:y(r),shouldReset:_}}},function(t,e){return{type:s.FAILED,payload:{error:e.error}}}],shouldSkipCall:p,onFinish:f})}var S,I=n(2832),R=n(3553),P=n(6176);function w(){return w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w.apply(this,arguments)}var A={nextOffset:0,progress:P.Z.INIT,error:0,requestId:""},x=(0,I.Z)(((S={})[s.REQUESTED]=function(t){return w({},t,{progress:P.Z.REQ})},S[s.SUCCESS]=function(t,e){var n=e.payload,r=n.data,o=n.tabConfig,a=n.rnTabConfig,i=n.offset,c=n.limit,s=n.shouldReset,u=t.data||r;return w({},t,{data:w({},u,{update_time:Number(Date.now()),sections:w({},u.sections,{dd_main_sec:w({},u.sections.dd_main_sec,{data:s?r.sections.dd_main_sec.data:(0,R.Z)(t.data?t.data.sections.dd_main_sec.data:[],r.sections.dd_main_sec.data,i)})})}),nextOffset:(i||0)+(c||0),tabConfig:o||t.tabConfig,rnTabConfig:a||t.rnTabConfig,progress:P.Z.OK,requestId:r.requestId||"",userMetaData:r.user_meta_data})},S[s.FAILED]=function(t,e){return w({},t,{error:e.payload.error,progress:P.Z.ERR})},S[u.SUCCESS]=function(t,e){var n,r=e.data,o=r.item_id,a=r.shop_id,i=r.data_type,c=t.data,s=((null==c||null===(n=c.sections)||void 0===n?void 0:n.dd_main_sec.data)||[]).filter((function(t){return!(t.data_type===i&&t.shopid===a&&t.itemid===o)}));return w({},t,{data:w({},c,{sections:w({},null==c?void 0:c.sections,{dd_main_sec:{total:(null==c?void 0:c.sections.dd_main_sec.total)||0,data:s}})})})},S[u.FAILED]=function(t,e){var n,r=e.data,o=r.item_id,a=r.shop_id,i=r.data_type,c=t.data,s=((null==c||null===(n=c.sections)||void 0===n?void 0:n.dd_main_sec.data)||[]).filter((function(t){return!(t.data_type===i&&t.shopid===a&&t.itemid===o)}));return w({},t,{data:w({},c,{sections:w({},null==c?void 0:c.sections,{dd_main_sec:{total:(null==c?void 0:c.sections.dd_main_sec.total)||0,data:s}})})})},S),A),L=[];function D(t,e){if(!t||!t.data)return L;if(!e||!e.limit&&!e.offset)return t.data.sections.dd_main_sec.data;var n=e.offset,r=void 0===n?0:n,o=e.limit;return t.data.sections.dd_main_sec.data.slice(r,"number"==typeof o?o+r:void 0)}function F(t){return!!t.data_type&&[l.Item,l.Ads].includes(t.data_type)}function N(t,e){return D(t,e).filter(F)}function U(t){return t&&t.data?t.data.sections.dd_main_sec.total:0}function H(t){return t&&t.tabConfig?t.tabConfig.all:null}function k(t){return t&&t.tabConfig?t.tabConfig.campaign:null}function M(t){return t?t.progress:P.Z.INIT}},2728:function(t,e,n){"use strict";n.d(e,{dF:function(){return r},tW:function(){return o},of:function(){return a}});var r="recommendItem",o="dailyDiscoverMain",a="dailyDiscoverCampaign"},2343:function(t,e,n){"use strict";var r;n.d(e,{P:function(){return r}}),function(t){t[t.SIMILAR_PRODUCTS=0]="SIMILAR_PRODUCTS",t[t.CATEGORY=1]="CATEGORY",t[t.COUNTRY=2]="COUNTRY",t[t.SIMILAR_ITEM=3]="SIMILAR_ITEM",t[t.POPULAR=4]="POPULAR",t[t.DAILY_DISCOVER=5]="DAILY_DISCOVER",t[t.OFFICIAL_SHOP=6]="OFFICIAL_SHOP",t[t.OFFICIAL_SHOP_POPULAR=7]="OFFICIAL_SHOP_POPULAR",t[t.TRENDING_SEARCHES=8]="TRENDING_SEARCHES",t[t.FROM_SAME_SHOP=9]="FROM_SAME_SHOP",t[t.SHOPPING_CART=10]="SHOPPING_CART",t[t.RECENTLY_VIEWED=11]="RECENTLY_VIEWED",t[t.YMAL=16]="YMAL",t[t.FIND_SIMILAR_PRODUCTS_FROM_ITEM_CARD=17]="FIND_SIMILAR_PRODUCTS_FROM_ITEM_CARD",t[t.FIND_SIMILAR_PRODUCTS_FROM_SHOPPING_CART=18]="FIND_SIMILAR_PRODUCTS_FROM_SHOPPING_CART",t[t.SIMILAR_PRODUCT_S_MART=19]="SIMILAR_PRODUCT_S_MART",t[t.JUST_FOR_YOU_1111=22]="JUST_FOR_YOU_1111",t[t.SHOP_FOR_YOU_1111=23]="SHOP_FOR_YOU_1111",t[t.BIG_SALE_11_11=26]="BIG_SALE_11_11",t[t.ORDER_PAID=24]="ORDER_PAID",t[t.SIMILAR_PRODUCTS_FROM_PRODUCT_DETAIL=27]="SIMILAR_PRODUCTS_FROM_PRODUCT_DETAIL",t[t.JUST_FOR_YOU_SHOP_FLASH_SALE=28]="JUST_FOR_YOU_SHOP_FLASH_SALE",t[t.COLLECTION_SHOP=34]="COLLECTION_SHOP",t[t.JUST_FOR_YOU_WELCOME_PACKAGE=49]="JUST_FOR_YOU_WELCOME_PACKAGE",t[t.FREQUENTLY_BOUGHT_TOGETHER=35]="FREQUENTLY_BOUGHT_TOGETHER",t[t.SHOP=-1]="SHOP"}(r||(r={}))},5852:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(3804),o=n(6775),a=n(7313);function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i.apply(this,arguments)}function c(){var t=(0,o.useHistory)(),e=(0,o.useLocation)().state,n=(null==e?void 0:e.sessionId)||(0,a.Z)();return r.useEffect((function(){var e=t.location.state,n=function(){null!=e&&e.sessionId&&t.replace(i({},t.location,{state:i({},e,{sessionId:void 0})}))};return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}}),[t]),null!=e&&e.sessionId||t.replace(i({},t.location,{state:i({},e,{sessionId:n})})),n}},3168:function(t,e,n){"use strict";n.d(e,{Z:function(){return It}});var r=n(3804),o=n.n(r),a=n(5325),i=n(4857),c=n(1902),s=n(5863),u=n.n(s);function l(){return l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l.apply(this,arguments)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}var f=function(t){var e,n;function o(e){var n;return(n=t.call(this,e)||this)._containerWidth=0,n._scrollWidth=0,n.computeMeasurements=function(){n._tabListRef&&(n._containerWidth=n._tabListRef.offsetWidth,n._scrollWidth=n._tabListRef.scrollWidth)},n.postHeaderUpdate=function(){var t=n.props.activeIndex;n.computeMeasurements(),n.slideIntoView(t)},n.handleTabHeaderClick=function(t){var e=n.props.changeActiveTab;e&&"function"==typeof e&&e(t)},n.slideIntoView=function(t){var e=n._tabRefs[t],r=n._tabWrapperRef;if(e&&r&&!(n._scrollWidth-n._containerWidth<0)){var o=r.scrollLeft||0,a=e.offsetLeft-o,i=e.offsetWidth,c=a-(n._containerWidth-i)/2;o+c<0?c=-o:o+c>n._scrollWidth-n._containerWidth&&(c=n._scrollWidth-n._containerWidth-o),n.cssScrolling(c,e)}},n.cssScrolling=function(t,e){var r=n._tabListRef,o=n._tabWrapperRef,a=n._indicatorRef;if(r&&o&&a){var i=n.props.transitionConfig,c=i.duration,s=i.easeFunction,u=i.delay;r.style.transition="transform "+c+" "+s+" "+u,r.style.transform="translateX("+-t+"px)",a.style.transition="transform "+c+" "+s+" "+u,a.style.transform="translateX("+(e.offsetLeft-t)+"px)",a.style.width=e.clientWidth+"px",n._transitionEndHandler&&r.removeEventListener("transitionend",n._transitionEndHandler),n._transitionEndHandler=function(){n.restoreScrollPosition(e,(o.scrollLeft||0)+t),r.removeEventListener("transitionend",n._transitionEndHandler),n._transitionEndHandler=null},r.addEventListener("transitionend",n._transitionEndHandler)}},n.restoreScrollPosition=function(t,e){var r=n._tabListRef,o=n._indicatorRef;r&&o&&(r.style.transition="transform 0s",r.style.transform="",o.style.transition="transform 0s",o.style.transform="translateX("+t.offsetLeft+"px)",n.scrollTo(e))},n.scrollTo=function(t){requestAnimationFrame((function(){n._tabWrapperRef&&("function"==typeof n._tabWrapperRef.scrollTo?n._tabWrapperRef.scrollTo(t,0):(n._tabWrapperRef.scrollLeft=t,n._tabWrapperRef.scrollTop=0))}))},n.indicatorStyle=function(t){var e=n.props,r=e.activeIndex,o=e.headerScrollable,a=e.underlineActiveTab,i=n._tabRefs&&n._tabRefs[r],c={display:a?"block":"none"};return o||(c.width=i?i.clientWidth+"px":100/t+"%",c.transform=i?"translateX("+i.offsetLeft+"px)":"translateX("+100*r+"%)"),c},n._tabRefs=[],n}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,d(e,n);var a=o.prototype;return a.componentDidMount=function(){var t=this.props,e=t.headerScrollable,n=t.activeIndex;e&&(this.computeMeasurements(),this.slideIntoView(n))},a.componentDidUpdate=function(t){var e=this.props,n=e.headerScrollable,r=e.activeIndex,o=e.header,a=t.headerScrollable,i=t.activeIndex,c=t.header;n&&(o!==c||o.length!==c.length?requestAnimationFrame(this.postHeaderUpdate):a&&r===i||this.slideIntoView(r))},a.render=function(){var t=this,e=this.props,n=e.headerTop,o=e.header,a=e.activeIndex,i=e.theme,c=e.headerStyle,s=void 0===c?{}:c,d=e.headerScrollable,f=o.filter((function(t){return null!=t})),p=f.length;return r.createElement("nav",{className:u()("stardust-tabs-header-wrapper",d?"stardust-tabs-header-wrapper--scrollable":""),style:l({},s,{top:n}),ref:function(e){return t._tabWrapperRef=e}},r.createElement("ul",{className:u()("stardust-tabs-header",{"stardust-tabs-header--light":"light"===i}),ref:function(e){return t._tabListRef=e}},f.map((function(e,n){return r.createElement("li",{className:u()("stardust-tabs-header__tab",{"stardust-tabs-header__tab--active":a===n}),onClick:function(){return t.handleTabHeaderClick(n)},key:n,ref:function(e){return t._tabRefs[n]=e}},e)}))),r.createElement("i",{style:this.indicatorStyle(p),ref:function(e){return t._indicatorRef=e},className:"stardust-tabs-header__tab-indicator"}))},o}(r.Component);function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}f.defaultProps={transitionConfig:{duration:"0.5s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"}};var h=function(t){var e,n;function o(e){var n;return n=t.call(this,e)||this,(0,c.Z)(e.header&&Array.isArray(e.header),"stardust-tabs-container: must pass in an array of ReactElement for the header props"),(0,c.Z)(e.children&&r.Children.count(e.children)===e.header.length,"stardust-tabs-container: tab panels must be equal to the tab headers"),n.state={activeIndex:e.activeIndex,scrollPositions:new Array(e.header.length).fill(0)},n._tabsHeaderAnchorRef=null,n.setTabsHeaderAnchorRef=n.setTabsHeaderAnchorRef.bind(p(n)),n.changeActiveTab=n.changeActiveTab.bind(p(n)),n}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,_(e,n);var a=o.prototype;return a.UNSAFE_componentWillReceiveProps=function(t){t.activeIndex!==this.props.activeIndex&&t.activeIndex!==this.state.activeIndex&&this.changeActiveTab(t.activeIndex,!0)},a.componentDidUpdate=function(t){this.updateScrollPositionStateOnUpdate(t.header,this.props.header)},a.updateScrollPositionStateOnUpdate=function(t,e){if(t.length!==e.length){var n=this.state.scrollPositions;this.setState({scrollPositions:Array.from({length:e.length},(function(t,e){return n[e]||0}))})}},a.setTabsHeaderAnchorRef=function(t){t&&(this._tabsHeaderAnchorRef=t)},a.changeActiveTab=function(t,e){var n=this;if(void 0===e&&(e=!1),(e||!this.props.shouldStopChangeTab||"function"!=typeof this.props.shouldStopChangeTab||!this.props.shouldStopChangeTab(t))&&this._tabsHeaderAnchorRef){var r=function(t){for(var e=0,n=t;n&&n.offsetParent;)"number"==typeof n.offsetTop&&(e+=n.offsetTop),n=n.offsetParent;return e}(this._tabsHeaderAnchorRef)-this.props.headerTop,o=window&&window.scrollY?window.scrollY:0,a=o>=r,i=a?r:o;this.setState({activeIndex:t,scrollPositions:this.state.scrollPositions.map((function(t,e){return a?e===n.state.activeIndex?n.props.scrollTabToTop?0:o-r:t:0}))},(function(){n.props.onChangeTab&&"function"==typeof n.props.onChangeTab&&n.props.onChangeTab(t);var e=i+n.state.scrollPositions[t];window&&window.scrollTo&&window.scrollTo(window.scrollX,e)}))}},a.render=function(){var t=this.props,e=t.header,n=t.headerTop,o=t.children,a=t.theme,i=t.underlineActiveTab,c=t.className,s=t.headerStyle,u=t.headerScrollable,l=t.toRem,d=this.state.activeIndex;return r.createElement("div",{className:c},r.createElement("div",{className:"stardust-tabs-header-anchor",ref:this.setTabsHeaderAnchorRef}),e?r.createElement(f,{activeIndex:d,headerTop:l?l(n):n,changeActiveTab:this.changeActiveTab,header:e,theme:a,underlineActiveTab:i,headerStyle:s,headerScrollable:!!u}):null,r.createElement("div",{className:"stardust-tabs-panels"},r.Children.map(o,(function(t,e){return r.createElement("section",{className:"stardust-tabs-panels__panel",style:{display:e!==d?"none":"block"},key:e},t)}))))},o}(r.Component);h.defaultProps={headerTop:0,activeIndex:0,theme:"dark",headerScrollable:!1};var m=n(9755),b=n(8526),v=n(6704);function g(t,e,n,r){return n||r?!!(n||[]).some((function(n){return t[n]!==e[n]}))||(r||[]).some((function(n){var r=t[n],o=e[n];return!(!Array.isArray(r)||!Array.isArray(o)||r.length===o.length)||(!!r&&JSON.stringify(r))!==(!!o&&JSON.stringify(o))})):!function(t,e){if(t===e)return!0;if(!t||!e)return!1;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&void 0===n.find((function(n){return t[n]!==e[n]}))}(t,e)}var y=n(5375);function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}var O=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,E(e,n);var a=o.prototype;return a.shouldComponentUpdate=function(t){return g(this.props,t,["recommendType","customTextColor","customHeaderImage","indicatorClassName"])},a.render=function(){var t=this.props,e=t.customTextColor,n=t.customHeaderImage,o=t.indicatorClassName,a=t.trackingRef,i=t.trackingClick;return r.createElement(r.Fragment,null,r.createElement("div",{className:u()("pdO7Wx",o||""),style:e?{background:e}:void 0}),r.createElement("div",{className:"_9EoVWE",onClick:i,ref:a},r.createElement(m.Z,{headerText:T("label_daily_discover"),customHeader:{color:e,image:n,display_height:y.b}})))},o}(r.Component),T=v.I18n.t,C=(0,b.Z)(O,"HomeRecommendTab"),S=n(5444),I=n(589),R=n(9905),P=n(2433),w=(n(2260),n(6775)),A=n(8790);function x(t,e){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(t,e)}function L(){return L=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L.apply(this,arguments)}function D(){return o().createElement("div",{style:{height:"1px"}})}function F(t){var e,n=t.loader,a=t.placeholder,i=t.PlaceholderComponent,c=t.skipLazyTrigger,s=t.rootMargin,u=!1,l=(0,r.lazy)(n),d=function(t){var e,n;function d(e){var n;return(n=t.call(this,e)||this).state={inViewPort:!1},n.onEnterViewPort=n.onEnterViewPort.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}n=t,(e=d).prototype=Object.create(n.prototype),e.prototype.constructor=e,x(e,n);var f=d.prototype;return f.onEnterViewPort=function(){u||(u=!0),!this.state.inViewPort&&this.setState({inViewPort:!0})},f.render=function(){var t=this.props,e=t.history,n=a||(i?o().createElement(i,t):o().createElement(D,null)),d=u&&e&&"POP"===e.action||c;return this.state.inViewPort||d?o().createElement(r.Suspense,{fallback:n},o().createElement(l,t)):o().createElement(A.U,{onEnterViewPort:this.onEnterViewPort,rootMargin:s},n)},d}(r.PureComponent);return e=d,function(t){var n=(0,w.useHistory)();return o().createElement(e,L({},t,{history:n}))}}var N=n(2685),U=n(1522),H=n(9712),k=n(428),M=n(8674),j=n(2717),Z=n(6176),V=n(2343),W=n(3302),Y=n(2728),G=n(8298),B=n(5852);function K(){return K=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K.apply(this,arguments)}var J=n(7762),z=n(7899);function Q(t){return t?{name:t.display_text,color:t.text_color,imageForPC:t.pc_image,imageForApp:t.tab_image,label:t.product_label,recommendType:t.algo_type||0}:{}}var q,X=n(9063),$=n(7008),tt=(0,$.n)("FETCH_DAILY_DISCOVER_TAB_CONFIG"),et=(0,$.n)("FETCH_DAILY_DISCOVER_PERSONALIZED_TABS"),nt=(0,$.n)("FETCH_DAILY_DISCOVER_COLLECTIONS"),rt=(0,$.n)("FETCH_DAILY_DISCOVER_TOP_PRODUCTS"),ot=n(2832);function at(){return at=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},at.apply(this,arguments)}var it={collections:[],topProducts:[],personalizedTabs:{error:0,loading:!1,categories:[]},tabConfig:{error:0,fetchStatus:Z.Z.INIT,config:{all:{},campaign:[]}}},ct=(0,ot.Z)(((q={})[tt.REQUESTED]=function(t){return at({},t,{tabConfig:at({},t.tabConfig,{fetchStatus:Z.Z.REQ,error:0})})},q[tt.SUCCESS]=function(t,e){return at({},t,{tabConfig:{config:e.data,fetchStatus:Z.Z.OK,error:0}})},q[tt.FAILED]=function(t,e){return at({},t,{tabConfig:{config:at({all:{},campaign:[]},(0,H.Z)(t,["tabConfig","config"])),fetchStatus:Z.Z.ERR,error:e.data}})},q[et.REQUESTED]=function(t){return at({},t,{personalizedTabs:at({},t.personalizedTabs,{loading:!0,error:0})})},q[et.SUCCESS]=function(t,e){return at({},t,{personalizedTabs:{loading:!1,error:0,categories:e.data}})},q[et.FAILED]=function(t,e){return at({},t,{personalizedTabs:{loading:!1,error:e.data,categories:[]}})},q[nt.REQUESTED]=function(t){return at({},t,{collections:[]})},q[nt.SUCCESS]=function(t,e){return at({},t,{collections:e.data})},q[rt.REQUESTED]=function(t){return at({},t,{topProducts:[]})},q[rt.SUCCESS]=function(t,e){return at({},t,{topProducts:e.data})},q),it);function st(t){return(0,H.Z)(t,["tabConfig","fetchStatus"],Z.Z.INIT)}function ut(t){var e=function(t){return(0,H.Z)(t,["tabConfig","config","campaign"])}(t);return e?e[0]:void 0}var lt=n(7864),dt=n(390),ft=n(2423);function pt(){pt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(I){c=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),i=new T(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=y(i,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,i),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(I){return{type:"throw",arg:I}}}t.wrap=s;var l={};function d(){}function f(){}function p(){}var _={};c(_,o,(function(){return this}));var h=Object.getPrototypeOf,m=h&&h(h(C([])));m&&m!==e&&n.call(m,o)&&(_=m);var b=p.prototype=d.prototype=Object.create(_);function v(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function r(o,a,i,c){var s=u(t[o],t,a);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(s.arg)}var o;this._invoke=function(t,n){function a(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(a,a):a()}}function y(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,y(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function C(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=p,c(b,"constructor",p),c(p,"constructor",f),f.displayName=c(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,i,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},v(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new g(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},v(b),c(b,i,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=C,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function _t(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,o)}function ht(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){_t(a,r,o,i,c,"next",t)}function c(t){_t(a,r,o,i,c,"throw",t)}i(void 0)}))}}function mt(t,e){return mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mt(t,e)}var bt,vt=F({loader:function(){return Promise.all([n.e(740),n.e(687),n.e(241)]).then(n.bind(n,2283))}}),gt=F({loader:function(){return Promise.all([n.e(740),n.e(687),n.e(17)]).then(n.bind(n,7200))}}),yt=F({loader:function(){return Promise.all([n.e(740),n.e(687),n.e(739)]).then(n.bind(n,5039))}}),Et=function(t){var e,n;function o(e){var n;return(n=t.call(this,e)||this)._ref=void 0,n.handleChangeTab=function(t){n.setState({activeTab:t},(function(){if(n._ref){var t=(0,N.FM)(n._ref).top-118;t<window.pageYOffset&&window.scroll(0,t)}}))},n.getRef=function(t){t&&(n._ref=t)},n.loadDailyDiscoverConfig=ht(pt().mark((function t(){var e;return pt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.props.isConfigFromBff){t.next=8;break}return n.props.injectAsyncReducer(((e={})[Y.tW]=lt.fp,e)),t.next=5,n.props.fetchBffDailyDiscoverMain({offset:0,limit:y.vX,itemCardStyle:G.$o.SIMPLIFIED_COUNT,view_session_id:n.props.viewSessionId});case 5:case 11:return t.abrupt("return",t.sent);case 8:return n.props.injectAsyncReducer({dailyDiscoverConfig:ct}),t.next=11,n.props.fetchTabConfig({shouldSkipCall:function(t){return st(t.dailyDiscoverConfig)===Z.Z.OK}});case 12:case"end":return t.stop()}}),t)}))),n.universalDataFetch=ht(pt().mark((function t(){return pt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.loadDailyDiscoverConfig();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),n.state={activeTab:0},n}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,mt(e,n);var a=o.prototype;return a.componentDidMount=function(){this.loadDailyDiscoverConfig()},a.shouldComponentUpdate=function(t,e){return g(this.props,t,["customHeader","accountInfo","accountStatus","allTabConfig","campaignTabConfig","tabConfigFetchStatus"])||e.activeTab!==this.state.activeTab},a.getTabs=function(){var t=this.props,e=t.allTabConfig,n=t.campaignTabConfig,o=[V.P.DAILY_DISCOVER];return e&&null!=n&&n.recommendType&&o.push(n.recommendType),o.map((function(t,o){var a=void 0,i=null,c=null;return e&&(a=e.color,i=null,c=e.name),n&&t!==V.P.DAILY_DISCOVER&&(a=n.color||a,i=n.imageForPC||i,c=n.name),r.createElement(R.ZP,{key:t,targetData:{tabName:c,index:o}},r.createElement(C,{recommendType:t,customTextColor:a,customHeaderImage:i,indicatorClassName:"QeTCYB"}))}))},a.getContents=function(){var t=this.state.activeTab,e=this.props,n=e.allTabConfig,o=e.campaignTabConfig,a=e.isConfigFromBff,i=e.accountInfo,c=[V.P.DAILY_DISCOVER];null!=o&&o.recommendType&&c.push(o.recommendType);var s=i.username,u=i.birthTimestamp,l=i.adultConsentTimestamp,d=(0,k.Eg)({username:s,birthTimestamp:u,adultConsentTimestamp:l},Ct,Tt).isUserAdult;return c.map((function(e,i){if(i!==t||!e)return null;var c=o&&o.label||0,s=null,u="";if(0===i)s=r.createElement(gt,{key:e,recommendType:e,tabId:i,isUserAdult:d,isConfigFromBff:a}),u=n&&n.name||"";else if((null==o?void 0:o.recommendType)===V.P.BIG_SALE_11_11&&c)s=r.createElement(yt,{key:e,recommendType:e,labelId:c,tabId:i,isUserAdult:d}),u=o&&o.name||"";else if((null==o?void 0:o.recommendType)!==V.P.BIG_SALE_11_11){var l=c?[c]:null;s=r.createElement(vt,{key:e,recommendType:e,labelIds:l,tabId:i,isUserAdult:d}),u=o&&o.name||""}return s?r.createElement(R.ZP,{key:e,targetData:{recommendType:e,tabId:i,tabName:u}},s):null}))},a.render=function(){var t=this.props,e=t.tabConfigFetchStatus,n=t.targetType;if(St.includes(e))return r.createElement(S.Z,{show:!0,hideOverlay:!0,spinnerClassName:"WbFgaB"});var o=(0,H.Z)(this.props.customHeader,["DAILY_DISCOVER","background_image"])||null,a=o?{backgroundImage:"url("+(0,M.Jn)(o)+")"}:void 0,i=this.getContents();return r.createElement(R.ZP,{targetType:(n?n+".":"")+"HomeDailyDiscover"},r.createElement("div",{ref:this.getRef},r.createElement(h,{header:this.getTabs(),headerStyle:a,className:u()("z5d0Yg",1===i.length?"EEZEHg":null),headerTop:118,activeIndex:this.state.activeTab,onChangeTab:this.handleChangeTab,toRem:U.Z},i)))},o}(r.Component),Ot=v.I18n.withI18nCollections,Tt=v.Env.getLocale(),Ct=(0,j.pO)(Tt).adultAge,St=[Z.Z.INIT,Z.Z.REQ],It=(0,i.compose)(I.Pf,J.withInjectReducer,(0,P.u)(),(0,a.connect)((function(t){var e,n=t.dailyDiscoverConfig,r=t.dailyDiscoverMain,o=t.featureToggles,a=!!(0,dt.Au)(o,W.I8U),i=(0,lt.WO)(r),c=a?(0,lt.zP)(r):(e=n,(0,H.Z)(e,["tabConfig","config","all"]));return{allTabConfig:c,campaignTabConfig:a?i&&i[0]:ut(n),tabConfigFetchStatus:a?!!c||(0,lt.Vx)(r):st(n),isConfigFromBff:a}}),{fetchTabConfig:function(t){var e=t.shouldSkipCall;return(0,z.Z)({apiCall:function(){return(0,X.fetchInfo)("/api/v2/cms/daily_discover_config")},actions:[function(){return{type:tt.REQUESTED}},function(t,e){var n=(0,H.Z)(e,["data","all_tab_config"]),r=(0,H.Z)(e,["data","campaign_tabs"],[]);return{type:tt.SUCCESS,data:{all:Q(n),campaign:r.map((function(t){return Q(t)}))}}},function(t,e){return{type:tt.FAILED,data:e.error}}],shouldSkipCall:function(t){return"function"==typeof e&&e(t)}})},fetchBffDailyDiscoverMain:lt.aN}),Ot([119,120]))((0,ft.Z)((bt=Et,function(t){var e=(0,B.Z)();return r.createElement(bt,K({},t,{viewSessionId:e}))})))},5375:function(t,e,n){"use strict";n.d(e,{b:function(){return r},vX:function(){return o},G6:function(){return a}});var r=20,o=60,a=48},2685:function(t,e,n){"use strict";n.d(e,{SO:function(){return o},Eq:function(){return a},FM:function(){return i}});var r=n(2728);function o(t){return t[r.tW]}function a(t){return t[r.of]}function i(t){var e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY}}},8790:function(t,e,n){"use strict";n.d(e,{U:function(){return s}});var r=n(3804),o=n(1902),a=n(3288),i=n(3482);function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}var s=function(t){var e,n;function s(e){var n;return(n=t.call(this,e)||this)._ref=null,n.setRef=function(t){t&&(n._ref=t)},(0,o.Z)(e.onEnterViewPort,"it's compulsory to pass onEnterViewPort function as props to LazyTrigger"),n}n=t,(e=s).prototype=Object.create(n.prototype),e.prototype.constructor=e,c(e,n);var u=s.prototype;return u.UNSAFE_componentWillMount=function(){i.N||this.props.onEnterViewPort()},u.componentDidMount=function(){i.N&&(this.props.observeMultipleTime?(0,a.N7)(this._ref,{enterViewCallback:this.props.onEnterViewPort,rootMargin:this.props.rootMargin}):(0,a.Bt)(this._ref,{enterViewCallback:this.props.onEnterViewPort,rootMargin:this.props.rootMargin}))},u.componentWillUnmount=function(){i.N&&(0,a.p_)(this._ref)},u.render=function(){return r.createElement("div",{ref:this.setRef},this.props.children)},s}(r.Component)},5444:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(3804),o=n.n(r),a=n(5863),i=n.n(a),c=n(4310);function s(t){var e=t.show,n=void 0!==e&&e,r=t.color,a=void 0===r?c._8:r,s=t.hideOverlay,u=void 0!==s&&s,l=t.spinnerClassName;return o().createElement("div",{className:i()({"stardust-spinner--hidden":!n},"stardust-spinner")},o().createElement("div",{className:i()("stardust-spinner__background",{"stardust-spinner__background--no-overlay":u})},o().createElement("div",{className:i()(l,"stardust-spinner__main"),role:"img"},o().createElement("svg",{width:"34",height:"12",viewBox:"-1 0 33 12"},o().createElement("circle",{className:"stardust-spinner__spinner",cx:4,cy:6,r:4,fill:a}),o().createElement("circle",{className:"stardust-spinner__spinner",cx:16,cy:6,r:4,fill:a}),o().createElement("circle",{className:"stardust-spinner__spinner",cx:28,cy:6,r:4,fill:a})))))}},1522:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});var r=function(t){return String(t/16)+"rem"}},2433:function(t,e,n){"use strict";n.d(e,{u:function(){return i}});var r=n(3804),o=n(8518);function a(){return a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a.apply(this,arguments)}var i=function(t){return function(t){return function(e){var n=(0,o.B)();return r.createElement(t,a({},e,n))}}}},17:function(t){"use strict";t.exports=s},1437:function(t){"use strict";t.exports=a},3696:function(t){"use strict";t.exports=d},6161:function(t){"use strict";t.exports=c},6704:function(t){"use strict";t.exports=n},3804:function(e){"use strict";e.exports=t},7274:function(t){"use strict";t.exports=l},5325:function(t){"use strict";t.exports=r},6775:function(t){"use strict";t.exports=i},4857:function(t){"use strict";t.exports=e},7762:function(t){"use strict";t.exports=o}},0,[[3168,666,873,390]]]),"Z",null]},1]),function(){if(window&&window.__DECKER_HOOK__){var t=window.__DECKER_HOOK__;function e(){t.sendToDevtools("MFE_LOAD_SLOT",{slotName:"pcmall-rcmd-daily-discover-module",tag:"pc-v5.29.0",branch:"heads/pc-v5.29.0",lastCommit:"chore(release): pc-v5.29.0",lastCommitHash:"04fd9e5bbf53ca90c10c37ac4769f56f54c197b2",updated:"2022-12-15T03:01:14.244Z"})}t.on("MFE_RETRIEVE_SLOTS",e),e()}}();
//# sourceMappingURL=https://sourcemap.webfe.shopee.io/pcmall-rcmd/_/pcmall-rcmd-daily-discover-module.f2c2c61749162b70c350.legacy.js.map